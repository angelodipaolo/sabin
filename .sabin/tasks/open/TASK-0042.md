---
status: review
title: Add status filter to sabin task list command
---
## Requirements

### User Stories
- As a developer, I want to filter tasks by status so I can focus on specific work stages
- As a developer, I want to quickly see only open tasks that need planning
- As a developer, I want to view ready tasks that are available for implementation
- As a developer, I want to check tasks in review status that need validation
- As a developer, I want to see completed tasks for reference

### Functional Requirements
- Add a `--status` (or `-s`) flag to the `sabin task list` command
- Accept valid status values: `open`, `ready`, `review`, `completed`
- When status filter is provided, display only tasks matching that status
- When no status filter is provided, display all tasks (current behavior)
- Maintain existing output format and styling
- Display appropriate message when no tasks match the filter

### Non-functional Requirements
- Command should execute quickly even with many tasks
- Error handling for invalid status values with helpful error message
- Consistent CLI experience with other sabin commands
- Help text should document the --status flag

### Edge Cases and Error Handling
- Invalid status value: Display error message listing valid statuses
- No tasks found for status: Display informative message (e.g., "No tasks found with status: ready")
- Empty .sabin directory: Handle gracefully with appropriate message
- Case sensitivity: Accept lowercase status values only (consistent with existing behavior)

### Implementation Considerations
- Leverage existing `listTasks()` function in `packages/cli/src/commands/list-tasks.ts`
- Filter logic should work with current task file organization (open/ vs completed/ directories)
- Consider that completed tasks are in different directory structure
- Update command help text and documentation

## Acceptance Criteria

1. **Status Filter Functionality**
   - `sabin task list --status open` displays only tasks with status: open
   - `sabin task list --status ready` displays only tasks with status: ready
   - `sabin task list --status review` displays only tasks with status: review
   - `sabin task list --status completed` displays only tasks with status: completed
   - `sabin task list` without filter displays all tasks (backward compatible)

2. **Error Handling**
   - `sabin task list --status invalid` displays error: "Invalid status. Valid statuses: open, ready, review, completed"
   - Command exits with non-zero status code on error

3. **Output Quality**
   - Filtered output maintains same format as unfiltered list
   - When no tasks match filter, display: "No tasks found with status: {status}"
   - Output includes appropriate color coding and formatting

4. **Testing**
   - Unit tests for status filtering logic
   - Tests for invalid status handling
   - Tests for empty result sets
   - Integration test verifying CLI flag parsing

5. **Documentation**
   - `sabin task list --help` shows --status flag with description
   - Help text lists valid status values

6. **Definition of Done**
   - All acceptance criteria tests pass
   - Code passes linting and type checking
   - No regression in existing `sabin task list` functionality
   - README or CLI help updated with status filter documentation
